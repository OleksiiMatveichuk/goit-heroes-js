import{l as T,c as G,a as P,b as H,r as V}from"./header-3cafbde5.js";async function W(e,n){let t=Math.ceil(n/e);document.createElement("div").classList.add("my-pagination");const r=await M(),l=await N(r.join(""));function m(c){return`<bitton class="pagination-number" page-index=${c} aria-label='Page ${c}'>${c}</bitton>`}async function M(c){let k=[];for(let h=1;h<=t;h++)k.push(m(h));return k}async function N(c){return`
        <nav class="pagination-container">
      <button class="pagination-button" id="prev-button" title="Previous page" aria-label="Previous page">
       &lt;
      </button>
  
      <div id="pagination-numbers">

     ${c}

     </div>
  
     <button class="pagination-button" id="next-button" title="Next page" aria-label="Next page">
      &gt;
     </button>
   </nav>`}return l}const _=document.querySelector(".filter-form"),v=document.querySelector('[name="order"]'),b=document.querySelector(".listbox");let L=!1;const j=Array.from(v.children);j.forEach(e=>{const n=e.value,t=e.textContent;z(n,t)});v.addEventListener("click",e=>{L?x():(b.classList.remove("visually-hidden"),L=!0)});function z(e,n){const t=document.createElement("button");t.classList.add("listbox-item"),t.dataset.value=e,t.textContent=n,t.type="button",t.addEventListener("click",()=>{v.value=e,_.dispatchEvent(new Event("change")),x()}),b.append(t)}function x(){b.classList.add("visually-hidden"),L=!1}document.addEventListener("click",e=>{const n=e.target;!b.contains(n)&&!v.contains(n)&&x()});let a=1,d,s,g,f;const O=document.querySelector(".filter-form");let I=document.querySelector('[name="comic"]'),p=document.querySelector('[name="name"]'),R=document.querySelector('[name="order"]'),B=document.querySelector('[name="date"]');const o=document.querySelector(".gallery");o.addEventListener("click",U);let A=null,S="";S+=`<option>All Years</option>
<option class="defolt-options">-----------</option>`;for(let e=1939;e<=2023;e++)S+=`<option>${e}</option>`;B.insertAdjacentHTML("beforeend",S);B.addEventListener("change",Y);async function Y(e){e.preventDefault,e.target.value==="All Years"?A=null:A=e.target.value}I.addEventListener("input",function(e){const n=e.target,t=n.value;/^\d*$/.test(t)||(n.value=t.replace(/\D/g,""))});p.addEventListener("input",function(e){const n=e.target,t=n.value;/^[a-zA-Z0-9\s!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]*$/.test(t)||(n.value=t.replace(/[^a-zA-Z0-9\s!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]/g,""))});const D=document.querySelector(".header-input");D.addEventListener("input",T(Z,500));async function Z(){const e=this.value.trim();if(e.length<2){this.setAttribute("list","");return}const t=(await P.getAllCharacters({nameStartsWith:e})).results,i=document.createElement("datalist");i.id="search-results",t.forEach(l=>{const m=document.createElement("option");m.value=l.name,i.appendChild(m)});const r=document.querySelector("#search-results");r?r.replaceWith(i):this.after(i),this.setAttribute("list","search-results")}const F=document.querySelector(".container");let E=window.getComputedStyle(F).width,u=null;parseInt(E,10)<375&&(E="100");switch(E){case"375px":u=4;break;case"100":u=4;break;case"1440px":u=16;break;default:u=8;break}o.setAttribute("data-limits",u);async function J(){try{const e=R.value.toLowerCase(),n=o.dataset.offset,t=await P.getAllCharacters({nameStartsWith:p.value,limit:u,offset:n,comics:I.value,orderBy:e,modifiedSince:"01/01/"+A});console.log("Data after request",t);const i=t.results;return o.setAttribute("data-total",t.total),o.setAttribute("data-offset",t.offset),i.length===0?H():V(i)}catch(e){console.log(e)}}O.addEventListener("change",async e=>{e.preventDefault();const n=document.querySelector(".pagination-container");n&&n.remove(),localStorage.setItem("searchValue",p.value),D.value=p.value,o.innerHTML="",o.innerHTML=await J(),await X(),document.getElementById("pagination-numbers").addEventListener("click",$),g=document.getElementById("next-button"),f=document.getElementById("prev-button"),y(),q(a),g.addEventListener("click",K),f.addEventListener("click",Q)});function K(){if(a===Math.ceil(d/s)){y();return}a+=1,q(a)}function Q(){a!==1&&(a-=1,q(a))}function U(e){if(e.target.classList.value==="gallery-image"){const n=Number(e.target.closest("li").dataset.id);G(n,"")}}async function X(){s=o.dataset.limits,d=26;const e=await W(s,d);o.insertAdjacentHTML("afterend",e)}function w(e){e.classList.add("disabled"),e.setAttribute("disabled",!0)}function C(e){e.classList.remove("disabled"),e.removeAttribute("disabled")}function y(){a===1?w(f):C(f),console.log(Math.ceil(d/s),"===",a),Math.ceil(d/s)===a?(console.log("desebl"),w(g)):C(g)}function $(e){if(e){console.log(e.target.getAttribute("page-index"));const n=e.target;a=Number(n.getAttribute("page-index")),document.querySelectorAll(".pagination-number").forEach(t=>{t.classList.remove("active"),Number(t.getAttribute("page-index"))==a&&t.classList.add("active")})}else document.querySelectorAll(".pagination-number").forEach(n=>{n.classList.remove("active"),Number(n.getAttribute("page-index"))===a&&n.classList.add("active")});y()}const q=e=>{a=e,$(),y();const n=(e-1)*s,t=e*s;document.querySelectorAll(".gallery-item").forEach((r,l)=>{r.classList.add("hidden"),l>=n&&l<t&&r.classList.remove("hidden")})};
