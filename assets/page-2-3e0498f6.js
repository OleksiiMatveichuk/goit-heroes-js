import{l as p,c as g,a as h,b,r as L}from"./header-fd375f38.js";const o=document.querySelector('[name="order"]'),l=document.querySelector(".listbox");let c=!1;const S=Array.from(o.children);S.forEach(e=>{const a=e.value,t=e.textContent;q(a,t)});o.addEventListener("click",e=>{c?d():(l.classList.remove("visually-hidden"),c=!0)});function q(e,a){const t=document.createElement("button");t.classList.add("listbox-item"),t.dataset.value=e,t.textContent=a,t.type="button",t.addEventListener("click",()=>{o.value=e,d()}),l.append(t)}function d(){l.classList.add("visually-hidden"),c=!1}document.addEventListener("click",e=>{const a=e.target;!l.contains(a)&&!o.contains(a)&&d()});const w=document.querySelector(".form");let E=document.querySelector('[name="comic"]'),i=document.querySelector('[name="name"]'),x=document.querySelector('[name="order"]'),k=document.querySelector('[name="date"]');const n=document.querySelector(".gallery");n.addEventListener("click",I);const y=document.querySelector(".header-input");y.addEventListener("input",p(C,500));async function C(){const e=this.value.trim();if(e.length<2){this.setAttribute("list","");return}const t=(await h.getAllCharacters({nameStartsWith:e})).results,r=document.createElement("datalist");r.id="search-results",t.forEach(v=>{const f=document.createElement("option");f.value=v.name,r.appendChild(f)});const m=document.querySelector("#search-results");m?m.replaceWith(r):this.after(r),this.setAttribute("list","search-results")}const A=document.querySelector(".container");let u=window.getComputedStyle(A).width,s=null;parseInt(u,10)<375&&(u="100");switch(u){case"375px":s=4;break;case"100":s=4;break;case"1440px":s=16;break;default:s=8;break}n.setAttribute("data-limits",s);console.log("Run all_charaster");async function D(){try{const e=x.value.toLowerCase(),a=n.dataset.offset,t=await h.getAllCharacters({nameStartsWith:i.value,limit:s,offset:a,comics:E.value,orderBy:e,modifiedSince:k.value}),r=t.results;return n.setAttribute("data-total",t.total),n.setAttribute("data-offset",t.offset),r.length===0?(console.log("NOT FOUND!!!! script all_caharasters_filter"),b()):L(r)}catch(e){console.log(e)}}w.addEventListener("change",async e=>{e.preventDefault(),localStorage.setItem("searchValue",i.value),y.value=i.value,n.innerHTML="",n.innerHTML=await D()});function I(e){if(e.target.classList.value==="gallery-image"){const a=Number(e.target.closest("li").dataset.id);g(a)}}
