import{l as S,c as E,a as y,b as q,r as A}from"./header-fbd7b0fb.js";const w=document.querySelector(".filter-form"),l=document.querySelector('[name="order"]'),c=document.querySelector(".listbox");let i=!1;const C=Array.from(l.children);C.forEach(e=>{const a=e.value,t=e.textContent;D(a,t)});l.addEventListener("click",e=>{i?f():(c.classList.remove("visually-hidden"),i=!0)});function D(e,a){const t=document.createElement("button");t.classList.add("listbox-item"),t.dataset.value=e,t.textContent=a,t.type="button",t.addEventListener("click",()=>{l.value=e,w.dispatchEvent(new Event("change")),f()}),c.append(t)}function f(){c.classList.add("visually-hidden"),i=!1}document.addEventListener("click",e=>{const a=e.target;!c.contains(a)&&!l.contains(a)&&f()});const x=document.querySelector(".filter-form");let g=document.querySelector('[name="comic"]'),o=document.querySelector('[name="name"]'),k=document.querySelector('[name="order"]'),m=document.querySelector('[name="date"]');const r=document.querySelector(".gallery");r.addEventListener("click",I);let u=null,v="";v+=`<option>All Years</option>
<option class="defolt-options">-----------</option>`;console.log("select date",m);for(let e=1939;e<=2023;e++)v+=`<option>${e}</option>`;m.insertAdjacentHTML("beforeend",v);m.addEventListener("change",T);async function T(e){e.preventDefault,e.target.value==="All Years"?u=null:u=e.target.value}g.addEventListener("input",function(e){const a=e.target,t=a.value;/^\d*$/.test(t)||(a.value=t.replace(/\D/g,""))});o.addEventListener("input",function(e){const a=e.target,t=a.value;/^[a-zA-Z0-9\s!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]*$/.test(t)||(a.value=t.replace(/[^a-zA-Z0-9\s!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]/g,""))});const L=document.querySelector(".header-input");L.addEventListener("input",S(_,500));async function _(){const e=this.value.trim();if(e.length<2){this.setAttribute("list","");return}const t=(await y.getAllCharacters({nameStartsWith:e})).results,n=document.createElement("datalist");n.id="search-results",t.forEach(b=>{const h=document.createElement("option");h.value=b.name,n.appendChild(h)});const p=document.querySelector("#search-results");p?p.replaceWith(n):this.after(n),this.setAttribute("list","search-results")}const $=document.querySelector(".container");let d=window.getComputedStyle($).width,s=null;parseInt(d,10)<375&&(d="100");switch(d){case"375px":s=4;break;case"100":s=4;break;case"1440px":s=16;break;default:s=8;break}r.setAttribute("data-limits",s);console.log("Run all_charaster");async function H(){try{const e=k.value.toLowerCase(),a=r.dataset.offset,t=await y.getAllCharacters({nameStartsWith:o.value,limit:s,offset:a,comics:g.value,orderBy:e,modifiedSince:"01/01/"+u});console.log("Data after request",t);const n=t.results;return r.setAttribute("data-total",t.total),r.setAttribute("data-offset",t.offset),n.length===0?(console.log("NOT FOUND!!!! script all_caharasters_filter"),q()):A(n)}catch(e){console.log(e)}}x.addEventListener("change",async e=>{e.preventDefault(),localStorage.setItem("searchValue",o.value),L.value=o.value,r.innerHTML="",r.innerHTML=await H()});function I(e){if(e.target.classList.value==="gallery-image"){const a=Number(e.target.closest("li").dataset.id);E(a,"")}}
