import{l as L,c as S,a as v,b as q,r as E}from"./header-fa6b0e31.js";const w=document.querySelector(".filter-form"),s=document.querySelector('[name="order"]'),l=document.querySelector(".listbox");let c=!1;const A=Array.from(s.children);A.forEach(e=>{const a=e.value,t=e.textContent;x(a,t)});s.addEventListener("click",e=>{c?m():(l.classList.remove("visually-hidden"),c=!0)});function x(e,a){const t=document.createElement("button");t.classList.add("listbox-item"),t.dataset.value=e,t.textContent=a,t.type="button",t.addEventListener("click",()=>{s.value=e,w.dispatchEvent(new Event("change")),m()}),l.append(t)}function m(){l.classList.add("visually-hidden"),c=!1}document.addEventListener("click",e=>{const a=e.target;!l.contains(a)&&!s.contains(a)&&m()});const k=document.querySelector(".filter-form");let C=document.querySelector('[name="comic"]'),i=document.querySelector('[name="name"]'),D=document.querySelector('[name="order"]'),f=document.querySelector('[name="date"]');const r=document.querySelector(".gallery");r.addEventListener("click",O);let u=null,h="";h+=`<option>All Years</option>
<option class="defolt-options">-----------</option>`;console.log("select date",f);for(let e=1939;e<=2023;e++)h+=`<option>${e}</option>`;f.insertAdjacentHTML("beforeend",h);f.addEventListener("change",T);async function T(e){e.preventDefault,e.target.value==="All Years"?u=null:u=e.target.value}const g=document.querySelector(".header-input");g.addEventListener("input",L(H,500));async function H(){const e=this.value.trim();if(e.length<2){this.setAttribute("list","");return}const t=(await v.getAllCharacters({nameStartsWith:e})).results,n=document.createElement("datalist");n.id="search-results",t.forEach(b=>{const y=document.createElement("option");y.value=b.name,n.appendChild(y)});const p=document.querySelector("#search-results");p?p.replaceWith(n):this.after(n),this.setAttribute("list","search-results")}const I=document.querySelector(".container");let d=window.getComputedStyle(I).width,o=null;parseInt(d,10)<375&&(d="100");switch(d){case"375px":o=4;break;case"100":o=4;break;case"1440px":o=16;break;default:o=8;break}r.setAttribute("data-limits",o);console.log("Run all_charaster");async function M(){try{const e=D.value.toLowerCase(),a=r.dataset.offset,t=await v.getAllCharacters({nameStartsWith:i.value,limit:o,offset:a,comics:C.value,orderBy:e,modifiedSince:"01/01/"+u});console.log("Data after request",t);const n=t.results;return r.setAttribute("data-total",t.total),r.setAttribute("data-offset",t.offset),n.length===0?(console.log("NOT FOUND!!!! script all_caharasters_filter"),q()):E(n)}catch(e){console.log(e)}}k.addEventListener("change",async e=>{e.preventDefault(),localStorage.setItem("searchValue",i.value),g.value=i.value,r.innerHTML="",r.innerHTML=await M()});function O(e){if(e.target.classList.value==="gallery-image"){const a=Number(e.target.closest("li").dataset.id);S(a,"")}}
